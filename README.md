# Paint

# User Manual for Myles’ Mouse Droppings
There are five buttons in the menu. The "Exit" button is used to exit out of the program. The "Erase" button is used for erasing droppings on the screen. The "Clear" button is used to clear the screen. When the "Foreground" button is selected, when you click a color on the color bar, it changes the color of the font to that selected color. When the "Background" button is selected, if you click a color on the color bar, it changes the background of the character to that selected color. The color bar is made up of 16 colors that the user can choose from. The status line at the bottom of the program has a “CrapChar” label which gives the current dropping’s character value and color attribute. Below CrapChar, the status lines display the coordinates for mouseX and mouseY.  To add a dropping, click anywhere within the menu and status lines in the black screen.

# Flags
I used a few flags throughout the program to mark when an interrupt occurred. There is a charFlag that is turned on when a character is pressed on the keyboard. If it was not the escape key, that character was immediately updated in the CrapChar label. There is a flag for a mouse movement. If the mouse moved, the flag was set in order to call the “DisplayXYCoordinates” function that printed the current mouseX and mouseY coordinate. The leftClickFlag was turned on at any time the left button was pressed. This would call the “LeftClick” function which goes through and checks where the click was and calls the next function accordingly. The rightClickFlag was turned on anytime the right button was pressed. This would call the “RightClick” function which switches the foreground and background attributes. The eraserFlag was used to determine if the “Erase” button was pressed and would stay on and execute that code until the “Erase” button was pressed again. The foregroundFlag and backgroundFlag were toggled between the two and were used to switch the colors based on which flag was on and what color was pressed.

# Color Bar
To display the color bar, I used a loop. I started off with black which is stored in the BL as 00h or 00000000B. I printed the color using five spaces. I then added one to the BL to make it the next color. I shifted the BL left four times so that the color attribute is moved into the background. I then moved the BL into the BH. I then shifted the BH right four times, so the color attribute is moved into the foreground. I then used the OR command to the move the last four bits of the BH into the BL. Then it would loop by checking if the loop ran 16 times, if not, it moved to the next color by adding one to the BL. Once I printed the first 8 colors, I incremented the row number and printed the next 8 underneath.

# Foreground and Background
To switch between change between the foreground and background, I used a flag to mark which one was off and which one was on and set a toggle switch accordingly. To switch the background, I moved a copy of the CrapColor into the BH. The AH had the current clicked attribute stored in it. I used the AND command to keep the last four bits of the AH and the first four bits of the BH. Then I used the OR command to move both values into one and moved it back into CrapColor. For the background, it was the same thing, just saved the first four bits of the AH and the last four bits of the BH.

# Right Click
For my Right Click Function, I moved the original color into the BL. I made a copy of that and moved it into the BH. I then shifted the BL four times to the left so that the BL contains the original foreground and make it the background. I shifted the BH four times to the right so that the BH contains the original background and make it the foreground. I then used the OR command to the move the last four bits of the BH into the BL. Lastly, I move the BL into CrapColor.

# Clear Button
I added a “Clear” button that was used to clear the screen. If that button was pressed, it would replace the screen with a dropping that had black as the foreground and background and place it over each location. I felt like this program needed something that would work quicker than the “Erase” button.

1. The code in main is constantly executed based on the code written using a loop in the main until an ESC key is pressed. The code in MouseEvent only gets executed when an interrupted is issued by a mouse movement, a left-click or a right-click. Once it interrupts, that interrupt’s code gets executed. The priority would be given to the MouseEvent only because it causes the main loop to stop in between instructions and handle its interrupt.

2. A thread is a way for a program to split itself into two or more tasks running simultaneously. The main loop and Mouse Event could be considered a thread because they are both technically running simultaneously. The main is constantly looping until it receives an exit flag or is interrupted. Since the mouse can constantly move, it threads itself in between the “main” code. The code for left-click and right-click also gets threaded in between the main’s code.

3. The text cursor line is a shared resource because it is used by the main and MouseEvent. The MouseEvent uses it to store the values of mouseX and mouseY in it. The main uses it for its functions. To make sure that I did not have strange side effects, I would constantly use the function SETCURSOR to avoid random printing or problems in areas where I did not mean to make something execute. Also, the use of flags makes it easier to know when certain buttons were pressed and what the mouse is attempting to use.
